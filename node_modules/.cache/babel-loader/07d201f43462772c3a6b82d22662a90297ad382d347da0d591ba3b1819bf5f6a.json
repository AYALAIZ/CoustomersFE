{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useContext, useState } from \"react\";\nimport { userContext } from './UserContext';\nimport axios from \"axios\";\n//import { read } from \"fs\";\n\nconst USERS_API_URL = 'https://localhost:44345/api/user';\nexport const UserApi = user => {\n  _s();\n  const [parentId, setParentID] = useState();\n  const userCtx = useContext(userContext);\n  const data1 = {\n    FirstName: userCtx.firstName,\n    LastName: userCtx.lastName,\n    Tz: userCtx.id,\n    DateOfBirth: userCtx.date,\n    Gender: userCtx.gender,\n    HMO: userCtx.hmo\n  };\n  axios.post('https://localhost:44345/api/user', {\n    ...data1\n  }).then(res => {\n    console.log(res);\n    console.log(res.data.id);\n    console.log(\"axios post of father finish\");\n\n    //catch parent id\n    setParentID(axios.get(`https://localhost:44345/api/user`).then(res => {\n      let currentUser = res.data.find(users => users.Tz === userCtx.id);\n      parentId = currentUser.ID;\n      // var people = res.data\n      // var id = 0;\n      // for (var i = 0; i < people.length; i++) {\n      //     if (people[i].tz === userCtx.id)\n      //     parentId = people[i].id\n      // }\n    }));\n\n    // console.log(res)\n    console.log(\"catch parent id\");\n    for (let i = 0; i < userCtx.arr.length; i++) {\n      let Children = {\n        Name: userCtx.arr[i].Name,\n        Tz: userCtx.arr[i].Tz,\n        BirthDate: userCtx.arr[i].BirthDate,\n        ParentId: parentId\n        // Parent: res.data\n      };\n\n      axios.post('https://localhost:44345/api/Children', {\n        Children\n      }).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.error(err.response.data);\n      });\n    }\n  }).catch(err => {\n    console.error(err.response.data);\n  }).catch(error => {\n    console.error(error.response.data);\n  });\n};\n_s(UserApi, \"UY282ha0E5sAhfZ5XbCb/LoH6JI=\");\n_c = UserApi;\nvar _c;\n$RefreshReg$(_c, \"UserApi\");","map":{"version":3,"names":["React","useContext","useState","userContext","axios","USERS_API_URL","UserApi","user","parentId","setParentID","userCtx","data1","FirstName","firstName","LastName","lastName","Tz","id","DateOfBirth","date","Gender","gender","HMO","hmo","post","then","res","console","log","data","get","currentUser","find","users","ID","i","arr","length","Children","Name","BirthDate","ParentId","catch","err","error","response"],"sources":["C:/Users/User/Pictures/פרקטיקום חדש/practy/src/Components/UserApi.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { userContext } from './UserContext';\r\nimport axios from \"axios\";\r\n//import { read } from \"fs\";\r\n\r\nconst USERS_API_URL = 'https://localhost:44345/api/user';\r\n\r\nexport const UserApi = (user) => {\r\n\r\n    const [parentId, setParentID] = useState();\r\n\r\n    const userCtx = useContext(userContext);\r\n\r\n    const data1 = {\r\n        FirstName: userCtx.firstName, LastName: userCtx.lastName, Tz: userCtx.id,\r\n        DateOfBirth: userCtx.date, Gender: userCtx.gender, HMO: userCtx.hmo\r\n    }\r\n\r\n    axios.post('https://localhost:44345/api/user', {\r\n        ...data1\r\n    })\r\n        .then(res => {\r\n            console.log(res)\r\n            console.log(res.data.id)\r\n            console.log(\"axios post of father finish\")\r\n\r\n            //catch parent id\r\n            setParentID(axios.get(`https://localhost:44345/api/user`)\r\n                .then(res => {\r\n                    let currentUser = res.data.find(users => users.Tz === userCtx.id);\r\n                    parentId = currentUser.ID\r\n                    // var people = res.data\r\n                    // var id = 0;\r\n                    // for (var i = 0; i < people.length; i++) {\r\n                    //     if (people[i].tz === userCtx.id)\r\n                    //     parentId = people[i].id\r\n                    // }\r\n                }))\r\n\r\n\r\n\r\n            // console.log(res)\r\n            console.log(\"catch parent id\")\r\n\r\n            for (let i = 0; i < userCtx.arr.length; i++) {\r\n                let Children = {\r\n                    Name: userCtx.arr[i].Name,\r\n                    Tz: userCtx.arr[i].Tz,\r\n                    BirthDate: userCtx.arr[i].BirthDate,\r\n                    ParentId: parentId,\r\n                    // Parent: res.data\r\n                }\r\n                axios.post('https://localhost:44345/api/Children', {\r\n                    Children\r\n                })\r\n\r\n\r\n                    .then(res => { console.log(res) })\r\n\r\n                    .catch(err => {\r\n                        console.error(err.response.data);\r\n                    });\r\n            }\r\n\r\n        })\r\n        .catch(err => {\r\n            console.error(err.response.data);\r\n        })\r\n    \r\n        .catch(error => {\r\n            console.error(error.response.data);\r\n        });\r\n}"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,WAAW,QAAQ,eAAe;AAC3C,OAAOC,KAAK,MAAM,OAAO;AACzB;;AAEA,MAAMC,aAAa,GAAG,kCAAkC;AAExD,OAAO,MAAMC,OAAO,GAAIC,IAAI,IAAK;EAAA;EAE7B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,EAAE;EAE1C,MAAMQ,OAAO,GAAGT,UAAU,CAACE,WAAW,CAAC;EAEvC,MAAMQ,KAAK,GAAG;IACVC,SAAS,EAAEF,OAAO,CAACG,SAAS;IAAEC,QAAQ,EAAEJ,OAAO,CAACK,QAAQ;IAAEC,EAAE,EAAEN,OAAO,CAACO,EAAE;IACxEC,WAAW,EAAER,OAAO,CAACS,IAAI;IAAEC,MAAM,EAAEV,OAAO,CAACW,MAAM;IAAEC,GAAG,EAAEZ,OAAO,CAACa;EACpE,CAAC;EAEDnB,KAAK,CAACoB,IAAI,CAAC,kCAAkC,EAAE;IAC3C,GAAGb;EACP,CAAC,CAAC,CACGc,IAAI,CAACC,GAAG,IAAI;IACTC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAChBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAACZ,EAAE,CAAC;IACxBU,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;;IAE1C;IACAnB,WAAW,CAACL,KAAK,CAAC0B,GAAG,CAAE,kCAAiC,CAAC,CACpDL,IAAI,CAACC,GAAG,IAAI;MACT,IAAIK,WAAW,GAAGL,GAAG,CAACG,IAAI,CAACG,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACjB,EAAE,KAAKN,OAAO,CAACO,EAAE,CAAC;MACjET,QAAQ,GAAGuB,WAAW,CAACG,EAAE;MACzB;MACA;MACA;MACA;MACA;MACA;IACJ,CAAC,CAAC,CAAC;;IAIP;IACAP,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;IAE9B,KAAK,IAAIO,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzB,OAAO,CAAC0B,GAAG,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MACzC,IAAIG,QAAQ,GAAG;QACXC,IAAI,EAAE7B,OAAO,CAAC0B,GAAG,CAACD,CAAC,CAAC,CAACI,IAAI;QACzBvB,EAAE,EAAEN,OAAO,CAAC0B,GAAG,CAACD,CAAC,CAAC,CAACnB,EAAE;QACrBwB,SAAS,EAAE9B,OAAO,CAAC0B,GAAG,CAACD,CAAC,CAAC,CAACK,SAAS;QACnCC,QAAQ,EAAEjC;QACV;MACJ,CAAC;;MACDJ,KAAK,CAACoB,IAAI,CAAC,sCAAsC,EAAE;QAC/Cc;MACJ,CAAC,CAAC,CAGGb,IAAI,CAACC,GAAG,IAAI;QAAEC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;MAAC,CAAC,CAAC,CAEjCgB,KAAK,CAACC,GAAG,IAAI;QACVhB,OAAO,CAACiB,KAAK,CAACD,GAAG,CAACE,QAAQ,CAAChB,IAAI,CAAC;MACpC,CAAC,CAAC;IACV;EAEJ,CAAC,CAAC,CACDa,KAAK,CAACC,GAAG,IAAI;IACVhB,OAAO,CAACiB,KAAK,CAACD,GAAG,CAACE,QAAQ,CAAChB,IAAI,CAAC;EACpC,CAAC,CAAC,CAEDa,KAAK,CAACE,KAAK,IAAI;IACZjB,OAAO,CAACiB,KAAK,CAACA,KAAK,CAACC,QAAQ,CAAChB,IAAI,CAAC;EACtC,CAAC,CAAC;AACV,CAAC;AAAA,GAjEYvB,OAAO;AAAA,KAAPA,OAAO;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}